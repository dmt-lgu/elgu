import{c as p,b as P,d as b,e as g,s as w,f as y,r as c,j as t,L as x,O as j,g as s,h as v,i as M,k as R}from"./index-54363d7a.js";import{T as V,e as E,M as N}from"./mode-toggle-112352ae.js";import"./axios-a28b9c02.js";import{S as h}from"./sweetalert2.esm.all-f7219925.js";import{a as u}from"./axios-7a713374.js";import"./floating-ui.dom-91f439f2.js";const k=p("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),A=p("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),T=[{id:"region1",text:"I",municipalities:[]},{id:"region2",text:"II",municipalities:[]},{id:"region3",text:"III",municipalities:[]},{id:"region4a",text:"IV-A",municipalities:[]},{id:"region5",text:"V",municipalities:[]},{id:"CAR",text:"CAR",municipalities:[]},{id:"region4b",text:"IV-B",municipalities:[]},{id:"region7",text:"VII",municipalities:[]},{id:"region8",text:"VIII",municipalities:[]},{id:"region6",text:"VI",municipalities:[]},{id:"region9",text:"IX",municipalities:[]},{id:"region10",text:"X",municipalities:[]},{id:"region11",text:"XI",municipalities:[]},{id:"region12",text:"XII",municipalities:[]},{id:"BARMM1",text:"BARMM I",municipalities:[]},{id:"BARMM2",text:"BARMM II",municipalities:[]},{id:"region13",text:"XIII",municipalities:[]}],S=[["I","II","III","IV-A","V"],["CAR","NCR","VII","VIII"],["VI","IX","X","XI","XII"],["BARMM I","BARMM II","XIII"]],X=r=>{const e={totalnewPending:0,totalnewPaid:0,totalnewPaidViaEgov:0,totalrenewPending:0,totalrenewPaid:0,totalrenewPaidViaEgov:0,totalmalePending:0,totalmalePaid:0,totalfemalePending:0,totalfemalePaid:0};return r.results.forEach(l=>{l.monthlyResults.forEach(a=>{e.totalnewPending+=a.newPending,e.totalnewPaid+=a.newPaid,e.totalnewPaidViaEgov+=a.newPaidViaEgov,e.totalrenewPending+=a.renewPending,e.totalrenewPaid+=a.renewPaid,e.totalrenewPaidViaEgov+=a.renewPaidViaEgov,e.totalmalePending+=a.malePending,e.totalmalePaid+=a.malePaid,e.totalfemalePending+=a.femalePending,e.totalfemalePaid+=a.femalePaid})}),e};function F(){const r=P(),e=b(),l=g(w),a=g(y),n=c.useRef(null);function f(){e(s(!0)),u.get("https://elguv1backend.ibpls.com/api/bp/lgu-list/").then(i=>{const o=T.map(d=>{var m;return{id:d.id,text:d.text,municipalities:(m=i.data)==null?void 0:m[d.id]}});console.log("Updated regions:",l),e(s(!1)),e(v(o))}).catch(i=>{console.error("Error fetching regions:",i),h.fire({icon:"error",title:"Error",text:"Failed to fetch regions. Please try again later."})})}function I(){e(s(!0)),u.post("https://elguv1backend.ibpls.com/api/bp/transaction-count/",{locationName:a.real,startDate:a.startDate,endDate:a.endDate}).then(i=>{const o=X(i.data);e(M(o)),e(R(i.data)),e(s(!1)),console.log("Total results:",o)}).catch(i=>{console.error("Error fetching transaction data:",i),h.fire({icon:"error",title:"Error",text:"Failed to fetch transaction data. Please try again later."})})}return c.useEffect(()=>(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{a.locationName.length!=0&&I()},1400),()=>{n.current&&clearTimeout(n.current)}),[a]),c.useEffect(()=>{f()},[]),t.jsx(V,{defaultTheme:"system",storageKey:"vite-ui-theme",children:t.jsxs("div",{className:"flex h-screen",children:[t.jsxs("aside",{className:" w-[300px] bg-card border-r border-border flex flex-col",children:[t.jsx("div",{className:" flex  justify-center items-center mt-5 border-border",children:t.jsx("img",{src:E,className:"w-[140px] object-contain flex self-center",alt:""})}),t.jsxs("nav",{className:"flex flex-col mt-10 gap-6 ml-10",children:[t.jsxs(x,{to:"/elgu/admin/dashboard",className:`flex items-center gap-2 ${r.pathname==="/elgu/admin/dashboard"?"text-primary":"text-secondary-foreground"}`,children:[t.jsx(A,{className:"w-5 h-5"}),t.jsx("span",{children:"Dashboard"})]}),t.jsxs(x,{to:"/elgu/admin/report",className:`flex items-center gap-2 ${r.pathname==="/elgu/admin/report"?"text-primary":"text-secondary-foreground"}`,children:[t.jsx(k,{className:"w-5 h-5"}),t.jsx("span",{children:"Reports"})]})]})]}),t.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[t.jsx("header",{className:" bg-card border-b h-[50px] border-border ",children:t.jsx("div",{className:"flex justify-end items-center h-full gap-4 mr-5 ",children:t.jsx(N,{})})}),t.jsx("div",{className:"flex-1 overflow-y-auto  bg-background",children:t.jsx(j,{})})]})]})})}export{F as default,S as regionGroups};
