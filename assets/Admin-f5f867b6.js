import{c as m,b as N,d as v,e as p,s as k,f as M,r as o,j as e,L as d,O as R,g as c,h as V,i as E,k as C}from"./index-994bf3ba.js";import{T as A,e as f,M as D}from"./mode-toggle-0bfe137c.js";import"./axios-a28b9c02.js";import{S as u}from"./sweetalert2.esm.all-d4e570c2.js";import{a as b}from"./axios-7a713374.js";import"./floating-ui.dom-4d66a722.js";const I=m("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),y=m("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),X=m("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),T=m("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),B=[{id:"region1",text:"I",municipalities:[]},{id:"region2",text:"II",municipalities:[]},{id:"region3",text:"III",municipalities:[]},{id:"region4a",text:"IV-A",municipalities:[]},{id:"region5",text:"V",municipalities:[]},{id:"CAR",text:"CAR",municipalities:[]},{id:"region4b",text:"IV-B",municipalities:[]},{id:"region7",text:"VII",municipalities:[]},{id:"region8",text:"VIII",municipalities:[]},{id:"region6",text:"VI",municipalities:[]},{id:"region9",text:"IX",municipalities:[]},{id:"region10",text:"X",municipalities:[]},{id:"region11",text:"XI",municipalities:[]},{id:"region12",text:"XII",municipalities:[]},{id:"BARMM1",text:"BARMM I",municipalities:[]},{id:"BARMM2",text:"BARMM II",municipalities:[]},{id:"region13",text:"XIII",municipalities:[]}],U=[["I","II","III","IV-A","V"],["CAR","NCR","VII","VIII"],["VI","IX","X","XI","XII"],["BARMM I","BARMM II","XIII"]],L=s=>{const a={totalnewPending:0,totalnewPaid:0,totalnewPaidViaEgov:0,totalrenewPending:0,totalrenewPaid:0,totalrenewPaidViaEgov:0,totalmalePending:0,totalmalePaid:0,totalfemalePending:0,totalfemalePaid:0};return s.results.forEach(x=>{x.monthlyResults.forEach(t=>{a.totalnewPending+=t.newPending,a.totalnewPaid+=t.newPaid,a.totalnewPaidViaEgov+=t.newPaidViaEgov,a.totalrenewPending+=t.renewPending,a.totalrenewPaid+=t.renewPaid,a.totalrenewPaidViaEgov+=t.renewPaidViaEgov,a.totalmalePending+=t.malePending,a.totalmalePaid+=t.malePaid,a.totalfemalePending+=t.femalePending,a.totalfemalePaid+=t.femalePaid})}),a};function K(){const s=N(),a=v(),x=p(k),t=p(M),[j,n]=o.useState(!1),r=o.useRef(null);function w(){a(c(!0)),b.get("https://elguv1backend.ibpls.com/api/bp/lgu-list/").then(i=>{const l=B.map(h=>{var g;return{id:h.id,text:h.text,municipalities:(g=i.data)==null?void 0:g[h.id]}});console.log("Updated regions:",x),a(c(!1)),a(V(l))}).catch(i=>{console.error("Error fetching regions:",i),u.fire({icon:"error",title:"Error",text:"Failed to fetch regions. Please try again later."})})}function P(){a(c(!0)),b.post("https://elguv1backend.ibpls.com/api/bp/transaction-count/",{locationName:t.real,startDate:t.startDate,endDate:t.endDate}).then(i=>{const l=L(i.data);a(E(l)),a(C(i.data)),a(c(!1)),console.log("Total results:",l)}).catch(i=>{console.error("Error fetching transaction data:",i),u.fire({icon:"error",title:"Error",text:"Failed to fetch transaction data. Please try again later."})})}return o.useEffect(()=>(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{t.locationName.length!=0&&P()},1400),()=>{r.current&&clearTimeout(r.current)}),[t.locationName,t.startDate,t.endDate]),o.useEffect(()=>{w()},[]),e.jsx(A,{defaultTheme:"light",storageKey:"vite-ui-theme",children:e.jsxs("div",{className:"flex h-screen",children:[e.jsxs("aside",{className:" md:hidden flex w-[300px] bg-card border-r border-border flex-col",children:[e.jsx("div",{className:" flex  justify-center items-center mt-5 border-border",children:e.jsx("img",{src:f,className:"w-[140px] object-contain flex self-center",alt:""})}),e.jsxs("nav",{className:"flex flex-col mt-10 gap-6 ml-10",children:[e.jsxs(d,{to:"/elgu/admin/dashboard",className:`flex items-center gap-2 ${s.pathname==="/elgu/admin/dashboard"?"text-primary":"text-secondary-foreground"}`,children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(d,{to:"/elgu/admin/report",className:`flex items-center gap-2 ${s.pathname==="/elgu/admin/report"?"text-primary":"text-secondary-foreground"}`,children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{children:"Reports"})]})]})]}),j&&e.jsxs("div",{className:"fixed inset-0 z-40 md:flex hidden",children:[e.jsxs("div",{className:"w-[250px] bg-card border-r border-border flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mt-5 px-4",children:[e.jsx("img",{src:f,className:"w-[120px] object-contain",alt:""}),e.jsx("button",{className:"p-2",onClick:()=>n(!1),"aria-label":"Close sidebar",children:e.jsx(T,{className:"w-6 h-6"})})]}),e.jsxs("nav",{className:"flex flex-col mt-10 gap-6 ml-10",children:[e.jsxs(d,{to:"/elgu/admin/dashboard",className:`flex items-center gap-2 ${s.pathname==="/elgu/admin/dashboard"?"text-primary":"text-secondary-foreground"}`,onClick:()=>n(!1),children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(d,{to:"/elgu/admin/report",className:`flex items-center gap-2 ${s.pathname==="/elgu/admin/report"?"text-primary":"text-secondary-foreground"}`,onClick:()=>n(!1),children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{children:"Reports"})]})]})]}),e.jsx("div",{className:"flex-1 bg-black bg-opacity-40",onClick:()=>n(!1)})]}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsx("header",{className:" bg-card border-b h-[50px] border-border ",children:e.jsxs("div",{className:"flex justify-between items-center h-full gap-4 mr-5 px-4",children:[e.jsx("button",{className:" hidden md:flex p-2",onClick:()=>n(!0),"aria-label":"Open sidebar",children:e.jsx(X,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 flex justify-end",children:e.jsx(D,{})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto  bg-background",children:e.jsx(R,{})})]})]})})}export{K as default,U as regionGroups};
